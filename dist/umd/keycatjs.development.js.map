{"version":3,"file":"keycatjs.development.js","sources":["../esm/Deferred.js","../esm/Blockchain.js","../esm/Validator.js","../esm/utils/window.js","../esm/index.js"],"sourcesContent":["var Deferred = /** @class */ (function () {\n    function Deferred() {\n        var _this = this;\n        this.resolve = null;\n        this.reject = null;\n        this.promise = new Promise(function (res, rej) {\n            _this.resolve = res;\n            _this.reject = rej;\n        });\n    }\n    return Deferred;\n}());\nexport { Deferred };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar eos = ['telos', 'telos-testnet'];\nvar Blockchain = {\n    eos: eos,\n};\nexport var appendPlugin = function (blockchain) {\n    var e_1, _a;\n    var keys = Object.keys(Blockchain);\n    try {\n        for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n            var key = keys_1_1.value;\n            var nameSet = Blockchain[key];\n            if (nameSet.find(function (n) { return n === blockchain.name; })) {\n                return __assign(__assign({}, blockchain), { plugin: key });\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    var plugin = blockchain.plugin;\n    if (!plugin) {\n        throw new Error(\"Cannot find 'plugin' property for your custom 'blockchain' configuration.\");\n    }\n    return blockchain;\n};\nexport default Blockchain;\n","import Blockchain from './Blockchain';\nvar throwValidationError = function (_a) {\n    var name = _a.name, property = _a.property, blockchain = _a.blockchain;\n    throw new Error(\"Property '\" + property + \"' in 'blockchain' is required. This error occurred because '\" + name + \"' should follow initialization rules of '\" + blockchain + \"' configuration.\");\n};\nvar EosValidator = /** @class */ (function () {\n    function EosValidator() {\n    }\n    EosValidator.prototype.isAcceptable = function (_a) {\n        var name = _a.name, nodes = _a.nodes, urlOrigin = _a.urlOrigin;\n        if (!Blockchain.eos.find(function (preset) { return name === preset; }))\n            return false;\n        if (!nodes) {\n            throwValidationError({ name: name, property: 'nodes', blockchain: 'eos' });\n        }\n        return true;\n    };\n    return EosValidator;\n}());\nvar validators = {\n    eos: EosValidator,\n};\nexport default validators;\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nexport function openWindow(url, mode) {\n    if (mode === 'page') {\n        return window.open(url, '_blank');\n    }\n    var w = 480;\n    var h = 720;\n    var y = window.top.outerHeight / 2 + window.top.screenY - h / 2;\n    var x = window.top.outerWidth / 2 + window.top.screenX - w / 2;\n    var features = [\"width=\" + w, \"height=\" + h, \"top=\" + y, \"left=\" + x].join(',');\n    return window.open(url, 'Keycat', features);\n}\nexport function makeWindowUrl(origin, path, data) {\n    var url = new URL(origin + path);\n    var searchParams = new URLSearchParams();\n    searchParams.set('blockchain', JSON.stringify(data.blockchain));\n    searchParams.set('client', location.origin);\n    if (data.account) {\n        searchParams.set('account', data.account);\n    }\n    if (data.args) {\n        searchParams.set('payload', data.args);\n    }\n    url.search = searchParams.toString();\n    return url.href;\n}\nexport var fromBinary = function (binary) {\n    var bytes = new Uint8Array(binary.length);\n    for (var i = 0; i < bytes.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    // @ts-ignore\n    return String.fromCharCode.apply(String, __spread(new Uint16Array(bytes.buffer)));\n};\nexport var toBinary = function (str) {\n    if (str === void 0) { str = ''; }\n    var codeUnits = new Uint16Array(str.length);\n    for (var i = 0; i < codeUnits.length; i++) {\n        codeUnits[i] = str.charCodeAt(i);\n    }\n    // @ts-ignore\n    return String.fromCharCode.apply(String, __spread(new Uint8Array(codeUnits.buffer)));\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { Deferred } from './Deferred';\nimport { appendPlugin } from './Blockchain';\nimport validators from './Validator';\nimport { openWindow, makeWindowUrl, toBinary } from './utils/window';\nvar Keycat = /** @class */ (function () {\n    function Keycat(config) {\n        this.config = config;\n        this.sign = this.signTransaction;\n        this.validateBlockchain(config.blockchain);\n        this._account = config.account;\n    }\n    Keycat.prototype.validateBlockchain = function (blockchain) {\n        var e_1, _a;\n        var chainName = blockchain.name, plugin = blockchain.plugin;\n        var names = Object.keys(validators);\n        try {\n            for (var names_1 = __values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()) {\n                var name_1 = names_1_1.value;\n                var validator = new validators[name_1]();\n                var isValid = validator.isAcceptable(blockchain);\n                if (isValid)\n                    return;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        // Using custom name which is not in the list of preset. Check plugin exists.\n        if (!chainName || !plugin) {\n            throw new Error(\"Unknown configuration for 'blockchain' property.\");\n        }\n        // tslint:disable-next-line\n        console.warn(\"You are using custom name. We hope you understand what you are doing. We recommend using a preset name.\");\n    };\n    Keycat.prototype.spawnWindow = function (url, secure) {\n        var _this = this;\n        if (secure === void 0) { secure = false; }\n        if (secure && !this._account) {\n            throw new Error(\"You must chain \\\"account\\\" method first. e.g) keycat.account(accountName).transact(...) \");\n        }\n        var deferred = new Deferred();\n        this.win = openWindow(url, this.config.ux);\n        var timer = setInterval(function () {\n            if (!_this.win || _this.win.closed) {\n                clearInterval(timer);\n                deferred.reject('closed');\n            }\n        }, 500);\n        window.onmessage = function (_a) {\n            var data = _a.data;\n            var ____keycat = data.____keycat;\n            if (!____keycat)\n                return;\n            _this.sendResponse(data, deferred);\n        };\n        return deferred.promise;\n    };\n    Keycat.prototype.sendResponse = function (message, deferred) {\n        var type = message.type, payload = message.payload;\n        if (type === 'close') {\n            deferred.reject('closed');\n        }\n        else {\n            var data = payload.data, error = payload.error;\n            if (error)\n                deferred.reject(error);\n            if (data)\n                deferred.resolve(data);\n        }\n        this.win && this.win.close();\n        this.win = null;\n    };\n    Keycat.prototype.makeUrlData = function (args) {\n        var stringifiedArgs = JSON.stringify(args);\n        var binaryStringifiedArgs = toBinary(stringifiedArgs);\n        var intermediate = btoa(binaryStringifiedArgs);\n        var encodedComponent = encodeURIComponent(intermediate);\n        return {\n            blockchain: appendPlugin(this.config.blockchain),\n            account: this._account,\n            args: encodedComponent,\n        };\n    };\n    Object.defineProperty(Keycat.prototype, \"keycatOrigin\", {\n        get: function () {\n            var _a = this.config.blockchain, origin = _a.origin, name = _a.name;\n            var telosOrigin;\n            if (name === 'telos') {\n                telosOrigin = 'https://sign.telos.net';\n            }\n            else if (name === 'telos-testnet') {\n                telosOrigin = 'https://sign-dev.telos.net';\n            }\n            else {\n                throw new Error(\"Unknown network \" + name);\n            }\n            var url = new URL(origin || telosOrigin);\n            return url.origin;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Keycat.prototype.account = function (accountName) {\n        this._account = accountName;\n        return this;\n    };\n    Keycat.prototype.signin = function () {\n        var url = makeWindowUrl(this.keycatOrigin, '/signin', this.makeUrlData());\n        return this.spawnWindow(url);\n    };\n    Keycat.prototype.transact = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var url = makeWindowUrl(this.keycatOrigin, '/transact', this.makeUrlData(args));\n        return this.spawnWindow(url, true);\n    };\n    Keycat.prototype.signArbitraryData = function (data) {\n        var url = makeWindowUrl(this.keycatOrigin, '/sign-arbitrary-data', this.makeUrlData([data]));\n        return this.spawnWindow(url, true);\n    };\n    Keycat.prototype.signTransaction = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var url = makeWindowUrl(this.keycatOrigin, '/sign-transaction', this.makeUrlData(args));\n        return this.spawnWindow(url, true);\n    };\n    return Keycat;\n}());\nvar KeycatTelos = /** @class */ (function (_super) {\n    __extends(KeycatTelos, _super);\n    function KeycatTelos(nodes, origin) {\n        return _super.call(this, {\n            blockchain: {\n                name: 'telos',\n                origin: origin,\n                nodes: nodes,\n            },\n        }) || this;\n    }\n    return KeycatTelos;\n}(Keycat));\nvar KeycatTelosTestnet = /** @class */ (function (_super) {\n    __extends(KeycatTelosTestnet, _super);\n    function KeycatTelosTestnet(nodes, origin) {\n        return _super.call(this, {\n            blockchain: {\n                name: 'telos-testnet',\n                origin: origin,\n                nodes: nodes,\n            },\n        }) || this;\n    }\n    return KeycatTelosTestnet;\n}(Keycat));\nKeycat.Telos = KeycatTelos;\nKeycat.TelosTestnet = KeycatTelosTestnet;\nexport { Keycat };\n"],"names":["this","__values"],"mappings":"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"}